name: Run Tests

on: [push, pull_request]

jobs:
  golang-tests:
    name: Golang Tests
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest]

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v2

    - name: Set up Go
      uses: actions/setup-go@v2
      with:
        go-version: '1.16'

    - name: Initialize Go module
      run: go mod init NeversitupCodeQuestTasks

    - name: Run Golang Tests
      run: go test ./golang/...

  csharp-tests:
    name: C# Tests
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest]

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v2

    - name: Change directory to c-sharp
      run: cd c-sharp

    - name: Setup .NET
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: '6.0.x'

    - name: Build and Test
      run: dotnet test --no-build --verbosity normal
